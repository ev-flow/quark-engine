<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quark Agent</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/dracula.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/python/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/clike/clike.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/xml/xml.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}">
  <link rel="stylesheet" href="{{url_for('static', filename='css/flowchart.css')}}">
</head>

<body>
  <div class="header">
    <img class="logo" src="{{url_for('static', filename='images/quark-logo.png')}}" />
    <h1 class="subtitle">Quark Agent: Your AI-powered Android APK Analyst</h1>
  </div>

  <div class="flowchart-container">
    <button id="new-action-button" class="circle-button" onclick="callButtonContainer()">+</button>
    <button id="codeblock-button" class="circle-button" onclick="showCodeBlock()">
      <i class="fa-solid fa-code"></i>
    </button>

    <div id="diagram-container"></div>

    <div id="codeBox" class="chatbox"></div>
    <div id="buttonContainer" class="hidden">
      <div class="centerText">New Action</div>
      <div class="button-grid" id="grids"></div>
    </div>
  </div>

  <div class="chatbox-container">
    <div class="chatbox" id="textBox"></div>
    <div class="container input">
      <textarea type="text" id="message" placeholder="Type your message here..."></textarea>
      <button id="send"></button>
    </div>
  </div>

</body>

<!-- 
<body>
  <img class="logo" src="{{url_for('static', filename='images/quark-logo.png')}}" />
  <h1 class="subtitle">Quark Agent: Your AI-powered Android APK Analyst</h1>

  <div class="container" id="largeContainer">
    <div class="container">
      <div class="row">
        <div class="chatbox" id="codeBox"></div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="chatbox" id="textBox"></div>
        <button id="toggleButton" class="circle-button" onclick="callButtonContainer()">+</button>
        <div id="diagram-container" class="container">
        </div>
      </div>

      
    </div>
  </div>

  <div class="container input-container">
    <textarea type="text" id="message" placeholder="Type your message here..."></textarea>
    <button id="send"></button>
  </div>

</body> -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.4/underscore-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@joint/core@4.0.1/dist/joint.js"></script>
<script src="{{url_for('static', filename='js/jointJS/node.js')}}"></script>
<script src="{{url_for('static', filename='js/jointJS/link.js')}}"></script>
<script src="{{url_for('static', filename='js/flowchart.js')}}"></script>
<script src="{{url_for('static', filename='js/chatbox.js')}}"></script>


<!-- <script src="{{url_for('static', filename='js/jointJS/test.js')}}"></script> -->
{% if debug %}
<script type="text/javascript">
  console.log("Debug mode is ON.");
  // set codebox to be visible
  // document.getElementById('codeBox').style.display = 'block';
  processNodesAndLinks(jsonData);
</script>
{% endif %}

</html>